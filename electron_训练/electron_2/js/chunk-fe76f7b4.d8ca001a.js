(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fe76f7b4"],{"2e6b":function(s,t,e){"use strict";var a=e("9374"),i=e.n(a);i.a},"737a":function(s,t,e){"use strict";var a=e("e4ab"),i=e.n(a);i.a},"7d98":function(s,t,e){"use strict";var a=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"allbk",style:{background:s.scolor}})},i=[],d={name:"allbk",props:["scolor"]},r=d,o=(e("2e6b"),e("2877")),n=Object(o["a"])(r,a,i,!1,null,"f4dddcea",null);n.options.__file="allBk.vue";t["a"]=n.exports},9374:function(s,t,e){},d82c:function(s,t,e){"use strict";e.r(t);var a=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"g-orderConfirm after"},[s.addressdetails.len?e("router-link",{staticClass:"m-address",attrs:{to:{name:"addressList",query:{order:"true"}},tag:"div"}},[""!=s.addressdetails.detalis?e("div",{staticClass:"s-msg"},[e("span",{staticClass:"name"},[s._v(s._s(s.addressdetails.detalis.contact))]),e("span",{staticClass:"phone"},[s._v(s._s(s.addressdetails.detalis.phone))])]):s._e(),""!==s.addressdetails.detalis?e("div",{staticClass:"s-addressDetails beyond"},[s._v("\n      "+s._s(s.addressdetails.detalis.province)+" "+s._s(s.addressdetails.detalis.city)+" "+s._s(s.addressdetails.detalis.area)+" "+s._s(s.addressdetails.detalis.address)+"\n    ")]):e("div",{staticClass:"s-choose"},[s._v("请选择地址")]),e("i",{staticClass:"s-rightArrow"})]):e("router-link",{staticClass:"m-address",attrs:{to:{name:"editaddress",query:{order:"true"}},tag:"div"}},[e("div",{staticClass:"s-choose"},[s._v("请填写地址")]),e("i",{staticClass:"s-rightArrow"})]),1==s.good.sortId||3==s.good.sortId?e("div",{staticClass:"m-goodDetails"},[e("div",{staticClass:"s-img"},[e("img",{attrs:{src:"https://fx18.oss-cn-hangzhou.aliyuncs.com/"+s.good.carousels[0],alt:""}})]),e("div",{staticClass:"s-box"},[e("span",{staticClass:"beyond"},[s._v(s._s(s.good.proName))]),e("span",{staticClass:"money"},[s._v(s._s(1==s.good.sortId||2==s.good.sortId?"积分":"元宝")+"："+s._s(s.good.price))]),e("span",{},[s._v("数量      ×"+s._s(s.bit.number))])])]):e("div",{staticClass:"m-goodDetails"},[e("div",{staticClass:"s-img"},[e("img",{attrs:{src:"https://fx18.oss-cn-hangzhou.aliyuncs.com/"+s.good.picMain,alt:""}})]),e("div",{staticClass:"s-box"},[e("span",{staticClass:"beyond"},[s._v(s._s(s.good.title))]),e("span",{staticClass:"money"},[s._v(s._s(1==s.good.sortId||2==s.good.sortId?"积分":"元宝")+"："+s._s(s.good.activityIntegral))]),e("span",{},[s._v("数量      ×"+s._s(s.bit.number))])])]),e("div",{staticClass:"m-list"},[e("div",{staticClass:"s-pay"},[e("span",[s._v("支付方式：")]),e("span",[s._v(s._s(1==s.good.sortId||2==s.good.sortId?"积分":"元宝"))])]),e("div",{staticClass:"s-number"},[e("span",[s._v("运费：")]),s.freight?e("span",[s._v(s._s(s.freight)+s._s(1==s.good.sortId||2==s.good.sortId?"积分":"元宝"))]):e("span",[s._v("包邮")])]),e("div",{staticClass:"s-userMsg"},[e("span",[s._v("买家留言：")]),e("input",{directives:[{name:"model",rawName:"v-model",value:s.bit.remark,expression:"bit.remark"}],attrs:{type:"text",placeholder:"输入你的要求"},domProps:{value:s.bit.remark},on:{input:function(t){t.target.composing||s.$set(s.bit,"remark",t.target.value)}}})])]),""!=s.addressdetails.detalis&&s.addressdetails.len?e("div",{staticClass:"m-submit",on:{click:s.showState}},[s._v("提交订单")]):""==s.addressdetails.detalis&&s.addressdetails.len?e("router-link",{staticClass:"m-submit",attrs:{tag:s.div,to:{name:"addressList",query:{order:"true"}}}},[s._v("选择地址")]):e("router-link",{staticClass:"m-submit",attrs:{tag:s.div,to:{name:"editaddress",query:{order:"true"}}}},[s._v("请填写地址")]),e("transition",{attrs:{name:"slide-fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:s.showdia,expression:"showdia"}],staticClass:"m-diabox"},[e("div",{staticClass:"s-title"},[s._v("确认支付")]),1==s.good.sortId||3==s.good.sortId?e("div",{staticClass:"s-money"},[s._v(s._s(1==s.good.sortId||2==s.good.sortId?"积分":"元宝")+"："+s._s(s.good.price*s.bit.number+s.freight))]):e("div",{staticClass:"s-money"},[s._v(s._s(1==s.good.sortId||2==s.good.sortId?"积分":"元宝")+"："+s._s(s.good.activityIntegral*s.bit.number+s.freight))]),e("div",{staticClass:"s-button",on:{click:s.paying}},[s._v("确认")]),e("i",{staticClass:"s-close",on:{click:s.closeing}})])]),e("allbk",{directives:[{name:"show",rawName:"v-show",value:s.showdia,expression:"showdia"}],attrs:{scolor:"rgba(192,192,192,0.6)"}})],1)},i=[],d=(e("ac6a"),e("a481"),e("cadf"),e("551c"),e("097d"),e("7d98")),r={name:"order-confirm",data:function(){return{showdia:!1,addressdetails:{len:!0,detalis:""},good:{},freight:0,bit:{remark:"",number:this.$store.state.orderC.number,proId:this.$store.state.orderC.proId,addressId:this.$store.state.orderC.addressId,username:sessionStorage.getItem("userid")},orderId:"",activityId:this.$store.state.orderC.activityId}},created:function(){this.addressList(),this.goodDetail()},mounted:function(){},methods:{showState:function(){var s=this;this.activityId&&(this.bit.activityId=this.activityId),this.$post(this.$bee+"/api/order/confirmOrder",this.bit).then(function(t){200==t.code?(s.showdia=!0,s.orderId=t.data.orderId,s.$store.commit("ORDERCLEAR")):s.$createToast({txt:t.message,type:"txt"}).show()})},paying:function(){var s=this;this.$post(this.$bee+"/api/order/payOrder",{username:this.bit.username,orderId:this.orderId}).then(function(t){200==t.code?s.$router.replace({name:"success",query:{orderId:s.orderId}}):(s.showdia=!1,s.$createToast({txt:t.message,type:"txt",time:2e3,onTimeout:function(){s.$router.replace({name:"nosuccess",query:{orderId:s.orderId}})}}).show())})},closeing:function(){this.showdia=!1,this.$router.replace({name:"nosuccess",query:{orderId:this.orderId}})},addressList:function(){var s=this;this.$post(this.$bee+"/api/user/listAddress",{username:this.bit.username}).then(function(t){if(200==t.code){if(0==t.data.adverts.length)s.addressdetails.len=!1;else{s.addressdetails.len=!0;var e=s.bit.addressId;t.data.adverts.forEach(function(t){e?t.id==e&&(s.addressdetails.detalis=t):t.isDefault&&(s.addressdetails.detalis=t,s.bit.addressId=t.id)})}s.yfed()}else s.$createToast({txt:t.message,type:"txt"}).show()})},goodDetail:function(){var s=this;this.$post(this.$bee+"/api/product/productDetail",{id:this.$store.state.orderC.proId}).then(function(t){200==t.code?s.activityId?t.data.activitys.forEach(function(e){s.activityId==e.id&&(e.sortId=t.data.pro.sortId,s.good=e)}):s.good=t.data.pro:s.$createToast({txt:t.message,type:"txt"}).show()})},yfed:function(){var s=this;this.bit.addressId&&this.$post(this.$bee+"/api/order/calculateShipping",{number:this.bit.number,addressId:this.bit.addressId,proId:this.bit.proId}).then(function(t){200==t.code?s.freight=t.data.freight:s.$createToast({txt:t.message,type:"txt"}).show()})}},components:{allbk:d["a"]}},o=r,n=(e("737a"),e("2877")),c=Object(n["a"])(o,a,i,!1,null,"d208c9a2",null);c.options.__file="orderConfirm.vue";t["default"]=c.exports},e4ab:function(s,t,e){}}]);
//# sourceMappingURL=chunk-fe76f7b4.d8ca001a.js.map